/*!
 * VueQuill @vueup/vue-quill v1.2.1
 * https://vueup.github.io/vue-quill/
 * 
 * Includes quill v1.3.7
 * https://quilljs.com/
 * 
 * Copyright (c) 2024 Ahmad Luthfi Masruri
 * Released under the MIT license
 * Date: 2024-10-26T17:35:05.392Z
 */
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("quill"),t=require("quill-delta"),o=require("vue"),l=require("defu");function n(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var r=n(e),i=n(t);const a={essential:[[{header:[1,2,3,4,5,6,!1]}],["bold","italic","underline"],[{list:"ordered"},{list:"bullet"},{align:[]}],["blockquote","code-block","link"],[{color:[]},"clean"]],minimal:[[{header:1},{header:2}],["bold","italic","underline"],[{list:"ordered"},{list:"bullet"},{align:[]}]],full:[["bold","italic","underline","strike"],["blockquote","code-block"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{font:[]}],[{align:[]}],["link","video","image"],["clean"]]},d=o.defineComponent({name:"QuillEditor",inheritAttrs:!1,props:{content:{type:[String,Object]},contentType:{type:String,default:"delta",validator:e=>["delta","html","text"].includes(e)},enable:{type:Boolean,default:!0},readOnly:{type:Boolean,default:!1},placeholder:{type:String,required:!1},theme:{type:String,default:"snow",validator:e=>["snow","bubble",""].includes(e)},toolbar:{type:[String,Array,Object],required:!1,validator:e=>"string"!=typeof e||""===e||("#"===e.charAt(0)||-1!==Object.keys(a).indexOf(e))},modules:{type:Object,required:!1},options:{type:Object,required:!1},globalOptions:{type:Object,required:!1}},emits:["textChange","selectionChange","editorChange","update:content","focus","blur","ready"],setup:(e,t)=>{let n,d;o.onMounted((()=>{c()})),o.onBeforeUnmount((()=>{n=null}));const u=o.ref(),s=(e,t)=>{(null==r?void 0:r.imports)&&e in r.imports||r.register(e,t)},c=()=>{var o;if(u.value){if(d=b(),e.modules)if(Array.isArray(e.modules))for(const t of e.modules)s(`modules/${t.name}`,t.module);else s(`modules/${e.modules.name}`,e.modules.module);n=new r(u.value,d),x(e.content),n.on("text-change",h),n.on("selection-change",g),n.on("editor-change",y),"bubble"!==e.theme&&u.value.classList.remove("ql-bubble"),"snow"!==e.theme&&u.value.classList.remove("ql-snow"),null===(o=n.getModule("toolbar"))||void 0===o||o.container.addEventListener("mousedown",(e=>{e.preventDefault()})),t.emit("ready",n)}},b=()=>{const t={};if(""!==e.theme&&(t.theme=e.theme),e.readOnly&&(t.readOnly=e.readOnly),e.placeholder&&(t.placeholder=e.placeholder),e.toolbar&&""!==e.toolbar&&(t.modules={toolbar:(()=>{if("object"==typeof e.toolbar)return e.toolbar;if("string"==typeof e.toolbar){return"#"===e.toolbar.charAt(0)?e.toolbar:a[e.toolbar]}})()}),e.modules){const o=(()=>{var t,o;const l={};if(Array.isArray(e.modules))for(const n of e.modules)l[n.name]=null!==(t=n.options)&&void 0!==t?t:{};else l[e.modules.name]=null!==(o=e.modules.options)&&void 0!==o?o:{};return l})();t.modules=l.defu(t.modules,o)}return l.defu(e.globalOptions,e.options,t)},p=e=>"object"==typeof e&&e?e.slice():e;let m;const f=e=>{if(typeof m==typeof e){if(e===m)return!0;if("object"==typeof e&&e&&"object"==typeof m&&m)return t=m.diff(e),!Object.values(t.ops).some((e=>!e.retain||1!==Object.keys(e).length))}var t;return!1},h=(o,l,n)=>{m=p(T()),f(e.content)||t.emit("update:content",m),t.emit("textChange",{delta:o,oldContents:l,source:n})},v=o.ref(),g=(e,o,l)=>{v.value=!!(null==n?void 0:n.hasFocus()),t.emit("selectionChange",{range:e,oldRange:o,source:l})};o.watch(v,(e=>{t.emit(e?"focus":"blur",u)}));const y=(...e)=>{"text-change"===e[0]&&t.emit("editorChange",{name:e[0],delta:e[1],oldContents:e[2],source:e[3]}),"selection-change"===e[0]&&t.emit("editorChange",{name:e[0],range:e[1],oldRange:e[2],source:e[3]})},T=(t,o)=>"html"===e.contentType?C():"text"===e.contentType?q(t,o):null==n?void 0:n.getContents(t,o),x=(t,o="api")=>{const l=t||("delta"===e.contentType?new i:"");"html"===e.contentType?j(l):"text"===e.contentType?O(l,o):null==n||n.setContents(l,o),m=p(l)},q=(e,t)=>{var o;return null!==(o=null==n?void 0:n.getText(e,t))&&void 0!==o?o:""},O=(e,t="api")=>{null==n||n.setText(e,t)},C=()=>{var e;return null!==(e=null==n?void 0:n.root.innerHTML)&&void 0!==e?e:""},j=e=>{n&&(n.root.innerHTML=e)};return o.watch((()=>e.content),(e=>{if(!n||!e||f(e))return;const t=n.getSelection();t&&o.nextTick((()=>null==n?void 0:n.setSelection(t))),x(e)}),{deep:!0}),o.watch((()=>e.enable),(e=>{n&&n.enable(e)})),{editor:u,getEditor:()=>u.value,getToolbar:()=>{var e;return null===(e=null==n?void 0:n.getModule("toolbar"))||void 0===e?void 0:e.container},getQuill:()=>{if(n)return n;throw'The quill editor hasn\'t been instantiated yet,\n                  make sure to call this method when the editor ready\n                  or use v-on:ready="onReady(quill)" event instead.'},getContents:T,setContents:x,getHTML:C,setHTML:j,pasteHTML:(e,t="api")=>{const o=null==n?void 0:n.clipboard.convert(e);o&&(null==n||n.setContents(o,t))},focus:()=>{null==n||n.focus()},getText:q,setText:O,reinit:()=>{o.nextTick((()=>{var e;!t.slots.toolbar&&n&&(null===(e=n.getModule("toolbar"))||void 0===e||e.container.remove()),c()}))}}},render(){var e,t;return[null===(t=(e=this.$slots).toolbar)||void 0===t?void 0:t.call(e),o.h("div",{ref:"editor",...this.$attrs})]}});exports.Quill=r,exports.Delta=i,exports.QuillEditor=d;
