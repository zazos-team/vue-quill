/*!
 * VueQuill @vueup/vue-quill v1.2.1
 * https://vueup.github.io/vue-quill/
 * 
 * Includes quill v1.3.7
 * https://quilljs.com/
 * 
 * Copyright (c) 2024 Ahmad Luthfi Masruri
 * Released under the MIT license
 * Date: 2024-10-26T17:35:05.392Z
 */
import e from"quill";export{default as Quill}from"quill";import t from"quill-delta";export{default as Delta}from"quill-delta";import{defineComponent as o,onMounted as l,onBeforeUnmount as n,ref as r,watch as i,nextTick as a,h as d}from"vue";import{defu as s}from"defu";const u={essential:[[{header:[1,2,3,4,5,6,!1]}],["bold","italic","underline"],[{list:"ordered"},{list:"bullet"},{align:[]}],["blockquote","code-block","link"],[{color:[]},"clean"]],minimal:[[{header:1},{header:2}],["bold","italic","underline"],[{list:"ordered"},{list:"bullet"},{align:[]}]],full:[["bold","italic","underline","strike"],["blockquote","code-block"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{font:[]}],[{align:[]}],["link","video","image"],["clean"]]},c=o({name:"QuillEditor",inheritAttrs:!1,props:{content:{type:[String,Object]},contentType:{type:String,default:"delta",validator:e=>["delta","html","text"].includes(e)},enable:{type:Boolean,default:!0},readOnly:{type:Boolean,default:!1},placeholder:{type:String,required:!1},theme:{type:String,default:"snow",validator:e=>["snow","bubble",""].includes(e)},toolbar:{type:[String,Array,Object],required:!1,validator:e=>"string"!=typeof e||""===e||("#"===e.charAt(0)||-1!==Object.keys(u).indexOf(e))},modules:{type:Object,required:!1},options:{type:Object,required:!1},globalOptions:{type:Object,required:!1}},emits:["textChange","selectionChange","editorChange","update:content","focus","blur","ready"],setup:(o,d)=>{let c,m;l((()=>{f()})),n((()=>{c=null}));const p=r(),b=(t,o)=>{(null==e?void 0:e.imports)&&t in e.imports||e.register(t,o)},f=()=>{var t;if(p.value){if(m=v(),o.modules)if(Array.isArray(o.modules))for(const e of o.modules)b(`modules/${e.name}`,e.module);else b(`modules/${o.modules.name}`,o.modules.module);c=new e(p.value,m),j(o.content),c.on("text-change",T),c.on("selection-change",x),c.on("editor-change",O),"bubble"!==o.theme&&p.value.classList.remove("ql-bubble"),"snow"!==o.theme&&p.value.classList.remove("ql-snow"),null===(t=c.getModule("toolbar"))||void 0===t||t.container.addEventListener("mousedown",(e=>{e.preventDefault()})),d.emit("ready",c)}},v=()=>{const e={};if(""!==o.theme&&(e.theme=o.theme),o.readOnly&&(e.readOnly=o.readOnly),o.placeholder&&(e.placeholder=o.placeholder),o.toolbar&&""!==o.toolbar&&(e.modules={toolbar:(()=>{if("object"==typeof o.toolbar)return o.toolbar;if("string"==typeof o.toolbar){return"#"===o.toolbar.charAt(0)?o.toolbar:u[o.toolbar]}})()}),o.modules){const t=(()=>{var e,t;const l={};if(Array.isArray(o.modules))for(const n of o.modules)l[n.name]=null!==(e=n.options)&&void 0!==e?e:{};else l[o.modules.name]=null!==(t=o.modules.options)&&void 0!==t?t:{};return l})();e.modules=s(e.modules,t)}return s(o.globalOptions,o.options,e)},g=e=>"object"==typeof e&&e?e.slice():e;let h;const y=e=>{if(typeof h==typeof e){if(e===h)return!0;if("object"==typeof e&&e&&"object"==typeof h&&h)return t=h.diff(e),!Object.values(t.ops).some((e=>!e.retain||1!==Object.keys(e).length))}var t;return!1},T=(e,t,l)=>{h=g(C()),y(o.content)||d.emit("update:content",h),d.emit("textChange",{delta:e,oldContents:t,source:l})},q=r(),x=(e,t,o)=>{q.value=!!(null==c?void 0:c.hasFocus()),d.emit("selectionChange",{range:e,oldRange:t,source:o})};i(q,(e=>{d.emit(e?"focus":"blur",p)}));const O=(...e)=>{"text-change"===e[0]&&d.emit("editorChange",{name:e[0],delta:e[1],oldContents:e[2],source:e[3]}),"selection-change"===e[0]&&d.emit("editorChange",{name:e[0],range:e[1],oldRange:e[2],source:e[3]})},C=(e,t)=>"html"===o.contentType?A():"text"===o.contentType?k(e,t):null==c?void 0:c.getContents(e,t),j=(e,l="api")=>{const n=e||("delta"===o.contentType?new t:"");"html"===o.contentType?L(n):"text"===o.contentType?w(n,l):null==c||c.setContents(n,l),h=g(n)},k=(e,t)=>{var o;return null!==(o=null==c?void 0:c.getText(e,t))&&void 0!==o?o:""},w=(e,t="api")=>{null==c||c.setText(e,t)},A=()=>{var e;return null!==(e=null==c?void 0:c.root.innerHTML)&&void 0!==e?e:""},L=e=>{c&&(c.root.innerHTML=e)};return i((()=>o.content),(e=>{if(!c||!e||y(e))return;const t=c.getSelection();t&&a((()=>null==c?void 0:c.setSelection(t))),j(e)}),{deep:!0}),i((()=>o.enable),(e=>{c&&c.enable(e)})),{editor:p,getEditor:()=>p.value,getToolbar:()=>{var e;return null===(e=null==c?void 0:c.getModule("toolbar"))||void 0===e?void 0:e.container},getQuill:()=>{if(c)return c;throw'The quill editor hasn\'t been instantiated yet,\n                  make sure to call this method when the editor ready\n                  or use v-on:ready="onReady(quill)" event instead.'},getContents:C,setContents:j,getHTML:A,setHTML:L,pasteHTML:(e,t="api")=>{const o=null==c?void 0:c.clipboard.convert(e);o&&(null==c||c.setContents(o,t))},focus:()=>{null==c||c.focus()},getText:k,setText:w,reinit:()=>{a((()=>{var e;!d.slots.toolbar&&c&&(null===(e=c.getModule("toolbar"))||void 0===e||e.container.remove()),f()}))}}},render(){var e,t;return[null===(t=(e=this.$slots).toolbar)||void 0===t?void 0:t.call(e),d("div",{ref:"editor",...this.$attrs})]}});export{c as QuillEditor};
